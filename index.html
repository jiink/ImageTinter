<script>
// $(document).on('submit',null, null,function (e) {
//     alert('Save Successful');
//     //prevent the form from doing a submit
//     e.preventDefault();
//     return false;
// });

// Runs when an image is selected
function previewImage(input) {
  
  // Update the img to show the selected image
  const reader = new FileReader();
  console.log("HELLO!");
  reader.onload = function (e) {
    const img = document.getElementById('preview');
    img.src = e.target.result;
  };
  reader.readAsDataURL(input.files[0]);

  // Produce tinted versions
  const img = document.getElementById('preview');
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');

  // Set the canvas dimensions to match the image
  canvas.width = img.width;
  canvas.height = img.height;

  // Draw the image onto the canvas
  ctx.drawImage(img, 0, 0);

  // Create a color-tinted version of the image using a red color overlay
  ctx.globalCompositeOperation = 'multiply';
  ctx.fillStyle = 'rgba(255, 0, 0, 1.0)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Convert the canvas data to a data URL and create an <img> element for each tinted version
  const dataUrlRed = canvas.toDataURL();
  const imgRed = document.createElement('img');
  imgRed.src = dataUrlRed;

  // Append the <img> elements to a container element
  const container = document.getElementById('tinted-images')
  container.appendChild(imgRed);
}
</script>

<head>
  <title>ImageTinter</title>
</head>

<body>
  <p>Upload your image, and tint it!!</p>
  <input type="file" accept="image/*" onchange="previewImage(this)">
  <img id="preview">
  <div id="tinted-images"></div>
</body>

<style>
* {
  margin: 0 auto;
  font-family: Helvetica;
}
html {
  background-color: #b3aaaa;
}

input[type="file"] {
  display: block;
  margin-bottom: 10px;
}

img {
  max-width: 100%;
  height: auto;
}

</style>
